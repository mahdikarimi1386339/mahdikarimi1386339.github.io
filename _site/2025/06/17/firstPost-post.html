<!doctype html>
<html lang="en">
    <head>
    <script>
        // چک کردن تم در لحظه لود شدن هد برای جلوگیری از پرش تصویر
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
        name="google-site-verification"
        content="Cr_uKwa8OX6jxV3MhAAxFWWrYvjMY2BAkKkm45KV9Ho"
    />
    <!-- start -->
        <!-- Open Graph (for Telegram, WhatsApp, Facebook, etc.) -->
    <meta property="og:title" content="My First Post" />
    <meta property="og:description" content="Hello World!
" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="http://localhost:4000/2025/06/17/firstPost-post.html" />
    <meta property="og:image" content="http://localhost:4000/assets/images/todaypic.jpg" />
    <meta property="og:site_name" content="The Cool Writer" />

    <!-- Optional: Specify locale -->
    <meta property="og:locale" content="en_US" />
    <!-- end -->
     <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="My First Post" />
    <meta name="twitter:description" content="Hello World!
" />
    <meta name="twitter:image" content="http://localhost:4000/assets/images/todaypic.jpg" />
    <!-- End Twitter Card -->
     
    <meta charset="UTF-8" />
    <title>My First Post | The Cool Writer</title>
    <link
        rel="stylesheet"
        href="/assets/css/style.css"
    />
    <!-- 
    <link
        href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif&family=Recursive&display=swap"
        rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <link href="https://cdn.fontcdn.ir/Font/Persian/Shabnam/Shabnam.css" rel="stylesheet" type="text/css" /> -->
    <link href="https://cdn.fontcdn.ir/Font/Persian/Samim/Samim.css" rel="stylesheet" type="text/css" />
    <!-- favicon -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Libre+Baskerville:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Scheherazade+New:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">

</head>

    <body>
        <div class="page-wrapper">
            <div class="container">
                <header class="main-header">
    <div class="header-content">
        <h1>
            <a id="website_title" href="/">The Cool Writer</a>
        </h1>
        
        <div class="nav-wrapper">
            <nav>
                <a href="/">home</a>
                <a href="/about">about</a>
            </nav>
            
            <button id="theme-toggle" type="button" class="theme-btn">
                <svg id="theme-toggle-dark-icon" class="hidden" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                <svg id="theme-toggle-light-icon" class="hidden" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"></path></svg>
            </button>
        </div>
    </div>
    <hr />
</header>
                <main class="post">
                    <header class="post-header" id="dynamic-header">
                        <h1><a href="/2025/06/17/firstPost-post.html">My First Post</a></h1>
                        
                        <p class="post-date">June 17, 2025</p>
                    </header>
                    <div class="post-content" id="dynamic-content">
                        <p>Hello World!</p>

                    </div>
                </main>
                <footer>
    <hr />
    <p>© The Cool Writer</p>
</footer>

            </div>
        </div>
        <!-- scripts for button -->
        <script>            
            var themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
            var themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');
            var themeToggleBtn = document.getElementById('theme-toggle');

            // تغییر آیکون بر اساس وضعیت فعلی
            if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                themeToggleLightIcon.classList.remove('hidden');
                document.documentElement.classList.add('dark');
            } else {
                themeToggleDarkIcon.classList.remove('hidden');
                document.documentElement.classList.remove('dark');
            }

            themeToggleBtn.addEventListener('click', function() {
                // جابجایی آیکون‌ها
                themeToggleDarkIcon.classList.toggle('hidden');
                themeToggleLightIcon.classList.toggle('hidden');

                // جابجایی کلاس Dark در تگ html و ذخیره در LocalStorage
                if (localStorage.getItem('color-theme')) {
                    if (localStorage.getItem('color-theme') === 'light') {
                        document.documentElement.classList.add('dark');
                        localStorage.setItem('color-theme', 'dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                        localStorage.setItem('color-theme', 'light');
                    }
                } else {
                    if (document.documentElement.classList.contains('dark')) {
                        document.documentElement.classList.remove('dark');
                        localStorage.setItem('color-theme', 'light');
                    } else {
                        document.documentElement.classList.add('dark');
                        localStorage.setItem('color-theme', 'dark');
                    }
                }
            });

            // for dynamic text direction
            document.addEventListener("DOMContentLoaded", function() {
                // تابع اصلی برای تشخیص جهت بر اساس اکثریت کاراکترها
                const getDirectionClass = (text) => {
                    // شمارش کاراکترهای فارسی/عربی
                    const farsiCount = (text.match(/[\u0600-\u06FF]/g) || []).length;
                    // شمارش کاراکترهای انگلیسی
                    const englishCount = (text.match(/[a-zA-Z]/g) || []).length;

                    // اگر متن هیچ کاراکتری نداشت (فقط عدد یا علامت بود) پیش‌فرض LTR باشد
                    if (farsiCount === 0 && englishCount === 0) return 'force-ltr';

                    // سنجش اکثریت
                    return farsiCount >= englishCount ? 'force-rtl' : 'force-ltr';
                };

                const header = document.getElementById('dynamic-header');
                const content = document.getElementById('dynamic-content');

                // ۱. بررسی هدر (تایتل، توضیحات، تاریخ)
                if (header) {
                    // برای هدر، تایتل را ملاک اکثریت قرار می‌دهیم
                    const titleText = header.querySelector('h1').innerText;
                    const majorityClass = getDirectionClass(titleText);
                    
                    header.classList.remove('force-rtl', 'force-ltr'); // پاکسازی قبلی
                    header.classList.add(majorityClass);
                    
                    // اعمال کلاس به فرزندان مستقیم هدر برای اطمینان از تراز شدن
                    header.querySelectorAll('h1, p, span').forEach(el => {
                        el.classList.remove('force-rtl', 'force-ltr');
                        el.classList.add(majorityClass);
                    });
                }

                // ۲. بررسی بدنه پست (پاراگراف به پاراگراف)
                if (content) {
                    const elements = content.querySelectorAll('p, h2, h3, h4, li, blockquote');
                    elements.forEach(el => {
                        const text = el.innerText;
                        if (text.trim().length > 0) {
                            const majorityClass = getDirectionClass(text);
                            el.classList.remove('force-rtl', 'force-ltr');
                            el.classList.add(majorityClass);
                        }
                    });
                }
            });

            // For images
            document.addEventListener("DOMContentLoaded", function() {
                // پیدا کردن تمام تصاویر داخل محتوای اصلی پست
                const postImages = document.querySelectorAll('.post-content img');

                postImages.forEach(img => {
                    // ۱. ایجاد المان div با کلاس PostImages
                    const container = document.createElement('div');
                    container.className = 'PostImages';

                    // ۲. ایجاد المان figcaption و قرار دادن متن alt در آن
                    const caption = document.createElement('figcaption');
                    caption.innerText = img.getAttribute('alt') || ""; // اگر alt نداشت خالی بماند

                    // ۳. جابجایی تصویر به داخل ساختار جدید
                    // ابتدا ظرف جدید را قبل از تصویر اصلی قرار می‌دهیم
                    img.parentNode.insertBefore(container, img);
                    
                    // تصویر و کپشن را به داخل ظرف منتقل می‌کنیم
                    container.appendChild(img);
                    container.appendChild(caption);

                    // ۴. تمیزکاری (اگر تصویر داخل یک پاراگراف تنها بود، آن پاراگراف خالی را حذف می‌کنیم)
                    const parentP = container.parentNode;
                    if (parentP && parentP.tagName === 'P' && parentP.innerText.trim() === "") {
                        parentP.parentNode.insertBefore(container, parentP);
                        parentP.remove();
                    }
                });
            });
        </script>
    </body>
</html>
